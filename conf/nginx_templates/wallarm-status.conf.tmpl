# wallarm-status, required for monitoring purposes.

# Default `wallarm-status` configuration.
# It is strongly advised not to alter any of the existing lines of the default
# wallarm-status configuration as it may corrupt the process of metric data
# upload to the Wallarm cloud.


server {
  {{ if env.Getenv "NGINX_PORT" -}}
          {{ $nginxListenPort = .Env.NGINX_PORT "80" -}}
  {{ end -}}
  listen 127.0.0.8:{{ print $nginxListenPort }};

  server_name localhost;

  allow 127.0.0.0/8;
  deny all;

  wallarm_mode off;
  disable_acl "on";
  access_log off;

  location ~/wallarm-status$ {
    wallarm_status on;
  }
}
